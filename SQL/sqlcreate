CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `password` char(64) COLLATE utf8_unicode_ci NOT NULL,
  `salt` char(16) COLLATE utf8_unicode_ci NOT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1;



-- MySQL Script generated by MySQL Workbench
-- 05/28/14 02:28:44
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema rentmyhouse
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `rentmyhouse` ;
CREATE SCHEMA IF NOT EXISTS `rentmyhouse` DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ;
USE `rentmyhouse` ;

-- -----------------------------------------------------
-- Table `rentmyhouse`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rentmyhouse`.`users` ;

CREATE TABLE IF NOT EXISTS `rentmyhouse`.`users` (
  `username` VARCHAR(20) BINARY NOT NULL UNIQUE,
  `firstName` VARCHAR(30) NOT NULL,
  `surName` VARCHAR(45) NOT NULL,
  `password` VARCHAR(150) BINARY NOT NULL,
  `salt` VARCHAR(8) BINARY NOT NULL,
  `email` VARCHAR(45) BINARY NOT NULL UNIQUE,
  `verificationCode` VARCHAR(5) NOT NULL,
  `active` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`username`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC))
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `rentmyhouse`.`houses` (
  `houseID` INT NOT NULL AUTO_INCREMENT,
  `houseName` VARCHAR(50) NOT NULL,
  `area` VARCHAR(120) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `addressNumber` INT NOT NULL,
  `postalCode` INT NOT NULL,
  `telephone` VARCHAR(10) NOT NULL,
  `mobilePhone` VARCHAR(10),
  `squareMeter` DOUBLE NOT NULL,
  `price` DOUBLE NOT NULL,
  `capacity` TINYINT NOT NULL,
  `garage` TINYINT(1) NULL DEFAULT 0,
  `wifi` TINYINT(1) NULL DEFAULT 0,
  `pool` TINYINT(1) NULL DEFAULT 0,
  `jacuzzi` TINYINT(1) NULL DEFAULT 0,
  `spa` TINYINT(1) NULL DEFAULT 0,
  `gym` TINYINT(1) NULL DEFAULT 0,
  `rating` TINYINT NULL,
  `coords` VARCHAR(40) NOT NULL,
  `villasDescr` MEDIUMTEXT NULL,
  `mainImageName` VARCHAR(100) NOT NULL,
  `users_username` VARCHAR(20) BINARY NOT NULL,
  PRIMARY KEY (`villaID`, `users_username`),
  INDEX `fk_villas_users1_idx` (`users_username` ASC),
  CONSTRAINT `fk_villas_users1`
    FOREIGN KEY (`users_username`)
    REFERENCES `rentmyhouse`.`users` (`username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rentmyhouse`.`photos`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rentmyhouse`.`photos` ;

CREATE TABLE IF NOT EXISTS `rentmyhouse`.`photos` (
  `photoID` INT NOT NULL AUTO_INCREMENT,
  `photoName` VARCHAR(100) NULL,
  `photoDescr` MEDIUMTEXT NULL,
  `villas_villaID` INT NOT NULL,
  `villas_users_username` VARCHAR(20) BINARY NOT NULL,
  PRIMARY KEY (`photoID`, `villas_villaID`, `villas_users_username`),
  INDEX `fk_photos_villas1_idx` (`villas_villaID` ASC, `villas_users_username` ASC),
  CONSTRAINT `fk_photos_villas1`
    FOREIGN KEY (`villas_villaID` , `villas_users_username`)
    REFERENCES `rentmyhouse`.`villas` (`villaID` , `users_username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;